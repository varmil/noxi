# 作業フロー

## 作業完了後の必須ステップ

すべてのコード変更作業が完了した後、以下のステップを **順番に** 実行してください。

### 1. 型チェック

```bash
# web の場合
cd web && npm run type-check

# backend の場合
cd backend && npm run type-check
```

作業で修正したファイルに応じて判断してください。

### 2. Lint チェックと修正

```bash
npm run lint
```

エラーが検出された場合は自動修正を試行：

```bash
npm run lint -- --fix
```

自動修正できないエラーについては、エラーメッセージを確認して手動で修正してください。

### 3. ユニットテスト実行

```bash
# web ディレクトリ
cd web && npm test

# backend ディレクトリ
cd backend && npm test
cd backend && npm run test:e2e
```

テストが失敗した場合はエラーメッセージを確認して修正してください。

### 4. E2E テスト実行

UI に影響する変更を行った場合は、E2E テストを実行してください。

```bash
cd e2e && npm test
```

**実行条件**:
- web のコンポーネント、ページ、スタイルを変更した場合
- backend の API レスポンスを変更した場合
- 上記以外（ドキュメント修正、内部リファクタリング等）はスキップ可

**注意**: ローカルで web/backend サーバーが起動中であれば再利用されます。起動していない場合は自動で起動します。

### 5. Git コミット

#### コミットメッセージの形式

```
<type>: <description>

[optional body]
```

#### タイプの種類

- `feat`: 新機能の追加
- `fix`: バグ修正
- `refactor`: リファクタリング（機能変更なし）
- `test`: テストの追加・修正
- `docs`: ドキュメントの更新
- `style`: コードスタイルの修正（フォーマット、セミコロンなど）
- `chore`: ビルドプロセスやツールの変更

#### 例

```bash
git commit -m "feat: ユーザー認証機能を追加"
git commit -m "fix: フォームバリデーションエラーを修正"
git commit -m "refactor: コンポーネント構造を改善し整理"
```

## Git ブランチ運用

- **main/master ブランチへの直接コミット・プッシュは禁止**
- 基本的に `develop` ブランチで作業する
- PR を作成してマージする

## 注意事項

- メッセージ本文は **日本語で記述**（prefix は英語のまま）
- 複数の異なる種類の変更がある場合は、適切に分割してコミット
- 機密情報や不要なファイルがコミットされないよう注意
- エラーが残っている状態では作業完了とは見なさない

## 自動化の流れ

1. 作業完了
2. 型チェック実行
3. Lint 修正実行
4. ユニットテスト実行
5. E2E テスト実行（UI 影響がある場合）
6. Git コミット実行
7. ユーザーに完了報告
