---
globs: web/**/*
---

# プロジェクト構造ガイドライン

このガイドラインは、bulletproof-react の原則に基づいて、一貫性のあるプロジェクト構造を維持するためのルールを定義します。

## 基本原則

### 1. 関心の分離

- **ページ固有**: 特定のページでのみ使用されるコンポーネント
- **機能別**: 複数のページで再利用される機能的なコンポーネント
- **共通 UI**: プロジェクト全体で使用される汎用的な UI（shadcn を活用）

### 2. コロケーション

- 関連するファイル（コンポーネント、テスト、型定義）は可能な限り近い場所に配置
- 使用される場所に近い場所にコンポーネントを配置

## ディレクトリ構造

```
web/src/
├── apis/         # Server Components, Server Actions から呼び出す外部通信
├── app/          # App Router のページコンポーネント
├── assets/       # 静的ファイル（images, fonts など）
├── components/   # プロジェクト全体で使用される共有コンポーネント
├── config/       # グローバル設定、環境変数など
├── features/     # 機能ベースのモジュール
├── hooks/        # 共有カスタムフック
├── lib/          # 再利用可能なライブラリ設定
├── stores/       # グローバル状態管理
├── types/        # 共有型定義
└── utils/        # 共有ユーティリティ関数
```

## コンポーネント配置の判断基準

### 1. ページ固有 (`src/app/[route]/components/`)

- 単一ページでのみ使用される
- ページ固有のロジック・データに依存

### 2. 機能別 (`src/features/[feature-name]/components/`)

- 複数ページで使用される
- 特定の機能領域に属する
- ビジネスロジックを含む

### 3. 共通 UI (`src/components/`)

- プロジェクト全体で広く使用
- ビジネスロジック非依存
- `src/components/ui/` は shadcn コンポーネント専用

## インポートパスの規則

- **同一ディレクトリ内**: 相対パス (`./component-name`)
- **それ以外**: 絶対パス (`@/features/...`, `@/components/...`)

## ファイル命名規則

- **コンポーネント**: ケバブケース `component-name.tsx`
- **ユニットテスト**: `component-name.test.tsx`（同階層）
- **Integration Test**: `__tests__/integration.test.ts`（上位位置）

## 新規コンポーネント作成時のチェックリスト

### 作成前

- [ ] このコンポーネントはどこで使用されるか？
- [ ] 特定の機能領域に属するか？
- [ ] 既存の類似コンポーネントはないか？

### 配置場所の決定

- [ ] ページ固有 → `src/app/[route]/components/`
- [ ] 機能別 → `src/features/[feature-name]/components/`
- [ ] 共通 UI → `src/components/ui/`

### 作成後

- [ ] ユニットテストファイルも同時に作成したか？
- [ ] インポートパスは適切か？
- [ ] 命名規則に従っているか？
